<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MORADO AI</title>

<style>
:root{
  --bg:#0f0f0f;
  --panel:#151515;
  --text:#e5e5e5;
  --border:#2a2a2a;
  --accent:#00ffff;
  --user:#1f1f1f;
  --ai:#242424;
}

.light{
  --bg:#f4f4f4;
  --panel:#ffffff;
  --text:#111;
  --border:#ddd;
  --user:#e6e6e6;
  --ai:#f0f0f0;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system;
  background:var(--bg);
  color:var(--text);
}

/* ===== AUTH ===== */
.auth{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.authCard{
  width:100%;
  max-width:380px;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:28px;
}
.authCard h1{text-align:center;margin-bottom:8px}
.authCard p{text-align:center;font-size:14px;opacity:.7}
.authCard input{
  width:100%;
  padding:14px;
  margin-top:12px;
  border-radius:10px;
  border:none;
  background:#1f1f1f;
  color:white;
}
.authCard button{
  width:100%;
  padding:14px;
  margin-top:18px;
  border:none;
  border-radius:10px;
  background:var(--accent);
  font-weight:bold;
  cursor:pointer;
}
.authSwitch{
  text-align:center;
  margin-top:14px;
  font-size:13px;
  color:var(--accent);
  cursor:pointer;
}

/* ===== APP ===== */
#app{display:none}

header{
  height:56px;
  background:var(--panel);
  display:flex;
  align-items:center;
  justify-content:center;
  border-bottom:1px solid var(--border);
  position:fixed;
  width:100%;
  z-index:10;
}

#hamburger,#settingsBtn{
  position:absolute;
  top:14px;
  font-size:20px;
  cursor:pointer;
  opacity:.7;
}
#hamburger{left:16px}
#settingsBtn{right:16px}

.container{
  display:flex;
  margin-top:56px;
}

/* Sidebar */
#sidebar{
  width:260px;
  background:var(--panel);
  border-right:1px solid var(--border);
  padding:15px;
  height:calc(100vh - 56px);
  overflow-y:auto;
  transition:.3s;
}
#sidebar h3{font-size:14px;opacity:.7}
#historyList{list-style:none;padding:0;margin:0}
#historyList li{
  padding:8px;
  background:var(--user);
  border-radius:6px;
  margin-bottom:6px;
  font-size:13px;
  cursor:pointer;
}

/* Chat */
#chatWrapper{
  flex:1;
  display:flex;
  justify-content:center;
}
#chatBox{
  width:100%;
  max-width:820px;
  padding:20px;
  padding-bottom:120px;
}
.infoBox{
  background:var(--panel);
  border:1px solid var(--border);
  padding:16px;
  border-radius:10px;
  margin-bottom:20px;
  font-size:14px;
  line-height:1.6;
}
.message{
  max-width:75%;
  padding:12px 16px;
  border-radius:14px;
  margin:12px 0;
  white-space:pre-wrap;
}
.user{background:var(--user);margin-left:auto}
.ai{background:var(--ai)}

/* Input */
.bottom{
  position:fixed;
  bottom:0;
  width:100%;
  background:var(--panel);
  border-top:1px solid var(--border);
  padding:12px;
  display:flex;
  justify-content:center;
}
.inputWrap{
  width:100%;
  max-width:820px;
  display:flex;
  gap:10px;
}
#userInput{
  flex:1;
  padding:14px 18px;
  border-radius:25px;
  border:none;
  background:var(--user);
  color:var(--text);
}
#sendBtn{
  width:48px;
  height:48px;
  border-radius:50%;
  border:none;
  background:var(--accent);
  cursor:pointer;
}

/* Settings */
#settings{
  position:fixed;
  right:-260px;
  top:56px;
  width:260px;
  height:calc(100vh - 56px);
  background:var(--panel);
  border-left:1px solid var(--border);
  padding:20px;
  transition:.3s;
}
#settings.open{right:0}
.setting{margin-bottom:15px}

/* Mobile */
@media(max-width:768px){
  #sidebar{
    position:fixed;
    left:-260px;
    top:56px;
    z-index:20;
  }
  #sidebar.open{left:0}
}
</style>
</head>

<body>

<!-- AUTH -->
<div class="auth" id="auth">
  <div class="authCard" id="loginBox">
    <h1>ü§ñ MORADO AI</h1>
    <p>Sign in to continue</p>
    <input id="loginEmail" placeholder="Email">
    <input id="loginPass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <div class="authSwitch" onclick="showSignup()">Create account</div>
  </div>

  <div class="authCard" id="signupBox" style="display:none">
    <h1>ü§ñ MORADO AI</h1>
    <p>Create your account</p>
    <input id="signupEmail" placeholder="Email">
    <input id="signupPass" type="password" placeholder="Password">
    <button onclick="signup()">Sign up</button>
    <div class="authSwitch" onclick="showLogin()">Back to login</div>
  </div>
</div>

<!-- APP -->
<div id="app">
  <header>
    <span id="hamburger">‚ò∞</span>
    ü§ñ MORADO AI
    <span id="settingsBtn">‚öôÔ∏è</span>
  </header>

  <div class="container">
    <aside id="sidebar">
      <h3>Search History</h3>
      <ul id="historyList"></ul>
    </aside>

    <main id="chatWrapper">
      <div id="chatBox">
        <div class="infoBox">
          <strong>ü§ñ MORADO AI</strong><br><br>
          ‚úÖ Responsive<br>
          ‚úÖ Centered chat<br>
          ‚úÖ ChatGPT-style UI<br>
          ‚úÖ Settings enabled<br>
          ‚úÖ Secure login flow
        </div>
      </div>
    </main>
  </div>

  <div class="bottom">
    <div class="inputWrap">
      <input id="userInput" placeholder="Message MORADO AI...">
      <button id="sendBtn">‚¨Ü</button>
    </div>
  </div>

  <div id="settings">
    <div class="setting">
      <label>Theme</label><br>
      <select id="themeSelect">
        <option value="dark">Dark</option>
        <option value="light">Light</option>
      </select>
    </div>

    <div class="setting">
      <label>Model</label><br>
      <select id="modelSelect">
        <option>MORADO-FAST</option>
        <option>MORADO-BALANCED</option>
        <option>MORADO-PRO</option>
      </select>
    </div>

    <div class="setting">
      <button onclick="logout()">Logout</button>
    </div>
  </div>
</div>

<script>
const BACKEND = "https://backend-k99w.onrender.com";

/* ===== AUTH ===== */
if(localStorage.getItem("user")) showApp();

function login(){
  localStorage.setItem("user",loginEmail.value);
  showApp();
}
function signup(){
  localStorage.setItem("user",signupEmail.value);
  showApp();
}
function logout(){
  localStorage.removeItem("user");
  location.reload();
}
function showApp(){
  auth.style.display="none";
  app.style.display="block";
}
function showSignup(){
  loginBox.style.display="none";
  signupBox.style.display="block";
}
function showLogin(){
  signupBox.style.display="none";
  loginBox.style.display="block";
}

/* ===== UI ===== */
settingsBtn.onclick=()=>settings.classList.toggle("open");
hamburger.onclick=()=>sidebar.classList.toggle("open");

/* Theme */
themeSelect.onchange=e=>{
  document.body.classList.toggle("light",e.target.value==="light");
  localStorage.setItem("theme",e.target.value);
};
if(localStorage.getItem("theme")==="light"){
  document.body.classList.add("light");
  themeSelect.value="light";
}

/* ===== CHAT ===== */
let history=JSON.parse(localStorage.getItem("chatHistory")||"[]");

function shortTitle(t){
  return t.split(" ").slice(0,4).join(" ");
}

function addMessage(text,type){
  const d=document.createElement("div");
  d.className="message "+type;
  d.innerText=text;
  chatBox.appendChild(d);
  chatBox.scrollTop=chatBox.scrollHeight;
}

history.forEach(m=>addMessage(m.text,m.type));

async function sendChat(){
  const msg=userInput.value.trim();
  if(!msg) return;

  userInput.value="";
  addMessage(msg,"user");

  history.push({type:"user",text:msg});
  localStorage.setItem("chatHistory",JSON.stringify(history));

  const li=document.createElement("li");
  li.innerText=shortTitle(msg);
  historyList.appendChild(li);

  try{
    const res=await fetch(BACKEND+"/api/chat",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({
        message:msg,
        model:modelSelect.value
      })
    });
    const data=await res.json();
    addMessage(data.reply||"No response from MORADO AI","ai");
  }catch(err){
    addMessage("‚ö†Ô∏è Server error. Try again.","ai");
  }
}

sendBtn.onclick=sendChat;
userInput.addEventListener("keydown",e=>{
  if(e.key==="Enter") sendChat();
});
</script>

</body>
</html>
